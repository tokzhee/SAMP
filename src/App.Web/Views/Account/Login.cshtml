@using App.Core.Utilities
@model App.Web.ViewModels.LoginViewModel

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>
        Salary Account Management Portal :: Login
    </title>

    <!-- plugins:css -->
    <link rel="stylesheet" href="@Url.Content("~/Assets/vendors/iconfonts/mdi/css/materialdesignicons.min.css")">
    <link rel="stylesheet" href="@Url.Content("~/Assets/vendors/iconfonts/flag-icon-css/css/flag-icon.min.css")">
    <link rel="stylesheet" href="@Url.Content("~/Assets/vendors/iconfonts/simple-line-icon/css/simple-line-icons.css")">
    <link rel="stylesheet" href="@Url.Content("~/Assets/vendors/css/vendor.bundle.base.css")">
    <link rel="stylesheet" href="@Url.Content("~/Assets/vendors/css/vendor.bundle.addons.css")">

    <link rel="stylesheet" href="@Url.Content("~/Assets/css/style.css")">
    @*<link rel="shortcut icon" href="@Url.Content("~/Assets/images/favicon.png")" />*@

    <link rel="apple-touch-icon" sizes="180x180" href="@Url.Content("~/Assets/images/apple-touch-icon.png")">
    <link rel="icon" type="image/png" sizes="32x32" href="@Url.Content("~/Assets/images/favicon-32x32.png")">
    <link rel="icon" type="image/png" sizes="16x16" href="@Url.Content("~/Assets/images/favicon-16x16.png")">
    <link rel="manifest" href="@Url.Content("~/Assets/images/site.webmanifest")">

</head>
<body>
    <div class="container-scroller">
        <div class="container-fluid page-body-wrapper full-page-wrapper">
            <div class="content-wrapper auth p-0 theme-two">
                <div class="row d-flex align-items-stretch">
                    <div class="col-md-4 banner-section d-none d-md-flex align-items-stretch justify-content-center">
                        <div class="slide-content bg-1">
                        </div>
                    </div>
                    <div class="col-12 col-md-8 h-100 bg-white">
                        <div class="auto-form-wrapper d-flex align-items-center justify-content-center flex-column">
                            <form action="@Url.Action("Login", new {returnUrl = Request.QueryString["returnUrl"]})" method="post">
                                @Html.AntiForgeryToken()
                                <h3 class="mr-auto">
                                    Salary Account Management Portal <img id="loading-spinner" src="@Url.Content("~/assets/images/me.gif")" style="display: none;" /> <br /> <small>let's get you started</small>
                                </h3>
                                <p class="mb-5 mr-auto">
                                    Enter your details below.
                                </p>

                                @if (TempData["Alert"] != null)
                                {
                                    @Html.Partial("_Alert", TempData["Alert"])
                                }

                                <div class="form-group">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <i class="mdi mdi-account-outline"></i>
                                            </span>
                                        </div>
                                        @Html.TextBoxFor(model => model.Username, new { @class = "form-control input-sm", placeholder = "Username here . . .", autocomplete = "off" })
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <i class="mdi mdi-lock-outline"></i>
                                            </span>
                                        </div>
                                        @Html.PasswordFor(model => model.Password, new { @class = "form-control input-sm", placeholder = "Password here . . .", autocomplete = "off" })
                                    </div>
                                </div>

                                @if (ConfigurationUtility.GetAppSettingValue("EnableToken").Equals("Y"))
                                {
                                    <div class="form-group">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i class="mdi mdi-lock-outline"></i>
                                                </span>
                                            </div>
                                            @Html.PasswordFor(model => model.AccessToken, new { @class = "form-control input-sm", placeholder = "Access token here . . .", autocomplete = "off" })
                                        </div>
                                    </div>
                                }

                                <div class="form-group d-flex justify-content-between">
                                    <button type="submit" class="btn btn-primary btn-xs submit-btn">
                                        <i class="mdi mdi-account-outline"></i>
                                        SIGN IN
                                    </button>
                                    <div class="form-group d-flex justify-content-between">
                                        <div class="form-check form-check-flat mt-0">
                                        </div>
                                        <a href="#" class="text-small forgot-password text-black" onclick="return forgotPassword();">
                                            Forgot Password?
                                        </a>
                                    </div>
                                </div>

                                <div class="wrapper mt-5 text-gray">
                                    <p class="footer-text">
                                        Copyright © @DateTime.Now.Year. First Bank of Nigeria Ltd. All Rights Reserved | An FBN Holdings Company | Powered by <a href="https://verstlelabs.com/" target="_blank" rel="external">Verstle Labs</a>
                                    </p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- content-wrapper ends -->
        </div>
        <!-- page-body-wrapper ends -->
    </div>

    <!-- plugins:js -->
    <script src="@Url.Content("~/Assets/vendors/js/vendor.bundle.base.js")"></script>
    <script src="@Url.Content("~/Assets/vendors/js/vendor.bundle.addons.js")"></script>
    <script src="@Url.Content("~/Assets/js/off-canvas.js")"></script>
    <script src="@Url.Content("~/Assets/js/hoverable-collapse.js")"></script>
    <script src="@Url.Content("~/Assets/js/misc.js")"></script>
    <script src="@Url.Content("~/Assets/js/settings.js")"></script>
    <script src="@Url.Content("~/Assets/js/todolist.js")"></script>
    <script src="@Url.Content("~/Assets/js/customAlert.js")"></script>
    <script src="@Url.Content("~/Assets/js/toastDemo.js")"></script>
    <script type="text/javascript">
        function forgotPassword() {
            var requestVerificationToken = $('input[name="__RequestVerificationToken"]').val();
            var username = $('#Username').val();
            var request = {
                "Username": "" + username + "",
                "__RequestVerificationToken": "" + requestVerificationToken + ""
            };
            $.ajax({
                url: "@Url.Action("ForgotPassword", "Account")",
                data: request,
                type: "POST",
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                    $("#loading-spinner").show();
                },
                success: function (result) {
                    window.location.href = "@Url.Action("Login", "Account")";
                },
                complete: function () {
                    $("#loading-spinner").hide();
                },
                error: function (error) {
                    alert(error.responseText);
                }
            });
        }
    </script>
</body>
</html>
